<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="A Small LM can‚Äôt add 6-digit numbers‚Äîbut it can learn to ask a calculator to do it, and generalize to arbitrary numbers.">

<title>Small LLMs Can‚Äôt Add‚ÄîBut They Can Learn to Ask ‚Äì sagaTrip</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-4d9afe2b8d18ee9fa5d0d57b5ed4214d.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-9b80f68f3e398bca18ebae74784ec24e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="Small LLMs Can‚Äôt Add‚ÄîBut They Can Learn to Ask ‚Äì sagaTrip">
<meta property="og:description" content="A Small LM can‚Äôt add 6-digit numbers‚Äîbut it can learn to ask a calculator to do it, and generalize to arbitrary numbers.">
<meta property="og:site_name" content="sagaTrip">
<meta name="twitter:title" content="Small LLMs Can‚Äôt Add‚ÄîBut They Can Learn to Ask ‚Äì sagaTrip">
<meta name="twitter:description" content="A Small LM can‚Äôt add 6-digit numbers‚Äîbut it can learn to ask a calculator to do it, and generalize to arbitrary numbers.">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://tripathysagar.github.io/resume.html" target="_blank"> 
<span class="menu-text">Resume</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://tripathysagar.github.io/PMPP/" target="_blank"> 
<span class="menu-text">PMPP Notes</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:tripathysagar08@gmail.com"> <i class="bi bi-envelope" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/sagar-tripathy" target="_blank"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/tripathysagar" target="_blank"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/@SimSagaTrip" target="_blank"> <i class="bi bi-youtube" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://x.com/tripathy_sagar0" target="_blank"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <span class="nav-link">
<span class="menu-text">üìç Open to Remote/Relocation</span>
    </span>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <a class="flex-grow-1 no-decor" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
          <h1 class="quarto-secondary-nav-title">Small LLMs Can‚Äôt Add‚ÄîBut They Can Learn to Ask</h1>
        </a>     
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üè† Home</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">üß† Transformers</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./llmforwardpass.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Magic Behind the Curtain: How LLMs Actually Generate Text</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./gptdecoder.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Building a Text Only Nano-GPT from Scratch: Character-Level Shakespeare Generation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./multimodal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Building a Multi Modal Nano-GPT from Scratch: Shakespeare Meets Fashion MNIST</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">üîß Fine-Tuning</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lorapytorch.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LoRA Explained: Fine-Tune Large Models with 90% Fewer Parameters</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./daftsft.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Domain Adaption Fine-Tuning with LoRA: My Experiment on Mac M1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./distilationweightinit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CPU-Friendly Bash Generation: Distilling Qwen2.5-Coder for Local Deployment</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./llm-arithmetic-experiments.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Small LLMs Can‚Äôt Add‚ÄîBut They Can Learn to Ask</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">ü§ñ Agents</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./agentfromfirstprinciple.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Agent From First Principle</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./KhazadDum.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Khazad Dum - Delving for Data with a Text2SQL Agent</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">üìö Fundamentals</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pythonwalkthrough.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python for Programmers: Fast Track to Productivity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./benchmarkingtokenizer4odia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Benchmarking LLM Tokenizers for Odia: A Comparative Study</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#chain-of-thought-experiments" id="toc-chain-of-thought-experiments" class="nav-link active" data-scroll-target="#chain-of-thought-experiments">Chain-Of-Thought Experiments</a>
  <ul class="collapse">
  <li><a href="#data-format" id="toc-data-format" class="nav-link" data-scroll-target="#data-format">Data format</a></li>
  <li><a href="#training-setup" id="toc-training-setup" class="nav-link" data-scroll-target="#training-setup">Training Setup</a></li>
  <li><a href="#in-range-results" id="toc-in-range-results" class="nav-link" data-scroll-target="#in-range-results">In-range Results</a></li>
  <li><a href="#out-of-range-failure" id="toc-out-of-range-failure" class="nav-link" data-scroll-target="#out-of-range-failure">Out-of-range Failure</a></li>
  </ul></li>
  <li><a href="#tool-use-experiment" id="toc-tool-use-experiment" class="nav-link" data-scroll-target="#tool-use-experiment">Tool Use Experiment</a>
  <ul class="collapse">
  <li><a href="#data-format-1" id="toc-data-format-1" class="nav-link" data-scroll-target="#data-format-1">Data Format</a></li>
  <li><a href="#training-setup-1" id="toc-training-setup-1" class="nav-link" data-scroll-target="#training-setup-1">Training Setup</a></li>
  <li><a href="#in-range-results-1" id="toc-in-range-results-1" class="nav-link" data-scroll-target="#in-range-results-1">In-range Results</a></li>
  <li><a href="#out-of-range-results" id="toc-out-of-range-results" class="nav-link" data-scroll-target="#out-of-range-results">Out-of-range Results</a></li>
  <li><a href="#surprising-generalizations" id="toc-surprising-generalizations" class="nav-link" data-scroll-target="#surprising-generalizations">Surprising Generalizations</a></li>
  <li><a href="#failure-analysis" id="toc-failure-analysis" class="nav-link" data-scroll-target="#failure-analysis">Failure Analysis</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/tripathysagar/sagaTrip/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Small LLMs Can‚Äôt Add‚ÄîBut They Can Learn to Ask</h1>
</div>

<div>
  <div class="description">
    A Small LM can‚Äôt add 6-digit numbers‚Äîbut it can learn to ask a calculator to do it, and generalize to arbitrary numbers.
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<p>I wanted to test a hypothesis: can a small language model master integer addition through training? Given two n-digit integers, can it learn to handle carries and digit alignment? I chose the base model(not an Instruct one) as it is mostly trained on predicting next token rather than following instruction and solving complex task. I considered <strong>SmolLM2-135M</strong>, for this experiment as it is small and efficient enough to run many experiments on colab T4.</p>
<p><strong>Spoiler alert</strong>: pure chain-of-thought training hit a hard ceiling, but tool use opened a surprising path forward.</p>
<p><strong>Notebooks</strong></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Description</th>
<th>Link</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>COT training experiment</td>
<td><a href="https://colab.research.google.com/github/tripathysagar/llm-arithmetic-experiments/blob/main/add_cot_exp.ipynb"><img src="https://colab.research.google.com/assets/colab-badge.svg" class="img-fluid" alt="Open In Colab"></a></td>
</tr>
<tr class="even">
<td>Tool use SFT experiment</td>
<td><a href="https://colab.research.google.com/github/tripathysagar/llm-arithmetic-experiments/blob/main/add_tool_exp.ipynb"><img src="https://colab.research.google.com/assets/colab-badge.svg" class="img-fluid" alt="Open In Colab"></a></td>
</tr>
</tbody>
</table>
<section id="chain-of-thought-experiments" class="level2">
<h2 class="anchored" data-anchor-id="chain-of-thought-experiments">Chain-Of-Thought Experiments</h2>
<section id="data-format" class="level3">
<h3 class="anchored" data-anchor-id="data-format">Data format</h3>
<p>As our experiment is small enough we can generate synthetic data for the addition which will give us more control. The data contain following structure:</p>
<ol type="1">
<li>padding the shorter number with leading zeros</li>
<li>init the <code>carry = 0</code></li>
<li>perform adding from the rightmost part of the numbers (least significant digit) with previous carry</li>
<li>then extract the result digit and carry</li>
<li>repeat prev step for all the digits in the numbers</li>
<li>if final carry &gt; 0 then it becomes the leading digit</li>
</ol>
<p>A simple COT for addition of 1 with 99 is brokendown to <code>01 + 99; col1: 1+9+0=10, write 0 carry 1; col2: 0+9+1=10, write 0 carry 1; final carry 1; answer=100</code></p>
</section>
<section id="training-setup" class="level3">
<h3 class="anchored" data-anchor-id="training-setup">Training Setup</h3>
<p>I used <strong>SmolLM2-135M</strong> (base model) with the following configuration: - Epochs: 5 - Batch size: 32 - Learning rate: 5e-4</p>
<p>For data, I generated synthetic addition problems across digit ranges: - 2-digit: 500 train / 50 val / 50 test - 3-digit: 6000 train / 550 val / 550 test</p>
<p>I ran two experiments: 1. Train on 1-4 digit combinations, test on 5 digits 2. Train on 1-5 digit combinations, test on 6 digits</p>
</section>
<section id="in-range-results" class="level3">
<h3 class="anchored" data-anchor-id="in-range-results">In-range Results</h3>
<p>Within the training digit range, the model achieved near-perfect accuracy. It learned the COT format correctly:</p>
<pre><code>10000 + 999 = 10000+00999, 0+9=9‚Üí9c0, 0+9=9‚Üí9c0, 0+9=9‚Üí9c0, 0+0=0‚Üí0c0, 1+0=1‚Üí1c0, ‚Üí10999</code></pre>
<p>The column-by-column reasoning and carry tracking worked flawlessly for problems within the trained range.</p>
</section>
<section id="out-of-range-failure" class="level3">
<h3 class="anchored" data-anchor-id="out-of-range-failure">Out-of-range Failure</h3>
<p>Testing on numbers beyond the training range revealed a hard ceiling. The model systematically <strong>truncated inputs</strong> to the maximum trained digit length rather than padding leading zeros:</p>
<pre><code>222222 + 22222 = 22222+22222, 2+2=4‚Üí4c0, 2+2=4‚Üí4c0, 2+2=4‚Üí4c0, 2+2=4‚Üí4c0, 2+2=4‚Üí4c0, ‚Üí44444</code></pre>
<p>Expected answer: <code>244444</code>. The model dropped the leading <code>2</code> from <code>222222</code>, reducing it to a 5-digit problem it knew how to solve.</p>
<p><strong>Key observation:</strong> The model perfectly memorized the COT pattern but couldn‚Äôt extend it beyond its training distribution.</p>
<p><strong>What worked:</strong> The model correctly extracted and aligned digits from the input.<br>
<strong>What failed:</strong> Following through on the multi-step addition algorithm.</p>
<p>Looking at the failure more carefully: the model did correctly identify both numbers from the input. The breakdown happened at the carry logic, not the parsing. This suggests the model‚Äôs strength lies in pattern recognition and extraction, not multi-step computation. Meanwhile, a CPU handles arithmetic trivially. So rather than teaching the model to <em>perform</em> addition, why not teach it to <em>extract</em> the operands and delegate the computation? This is the core idea behind tool use.</p>
</section>
</section>
<section id="tool-use-experiment" class="level2">
<h2 class="anchored" data-anchor-id="tool-use-experiment">Tool Use Experiment</h2>
<section id="data-format-1" class="level3">
<h3 class="anchored" data-anchor-id="data-format-1">Data Format</h3>
<div id="3b858483" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> transformers <span class="im">import</span> AutoTokenizer</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>model_nm <span class="op">=</span> <span class="st">"HuggingFaceTB/SmolLM2-135M"</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>tok <span class="op">=</span> AutoTokenizer.from_pretrained(model_nm)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Instead of the complete tracing of through addition our scope of data now limited. For input: <code>a + b</code> will be converted to <code>&lt;tool&gt;add(a, b)&lt;/tool&gt;</code>. Note: The tokenizer for the model does not have any special token for tool use. So I used raw string rather than expanding the vocab to keep the embedding fixed.</p>
<p>To give more entropy in the data, randomly select from the following formats</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode py code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>formats <span class="op">=</span> [</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"</span><span class="sc">{a}</span><span class="st"> + </span><span class="sc">{b}</span><span class="st">"</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Add: </span><span class="sc">{a}</span><span class="st">, </span><span class="sc">{b}</span><span class="st">"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"</span><span class="sc">{a}</span><span class="st"> + </span><span class="sc">{b}</span><span class="st"> = "</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"</span><span class="sc">{a}</span><span class="st">+</span><span class="sc">{b}</span><span class="st">=?"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"sum of </span><span class="sc">{a}</span><span class="st"> and </span><span class="sc">{b}</span><span class="st">"</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"What is </span><span class="sc">{a}</span><span class="st"> + </span><span class="sc">{b}</span><span class="st">?"</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"</span><span class="sc">{a}</span><span class="st"> plus </span><span class="sc">{b}</span><span class="st">"</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Calculate </span><span class="sc">{a}</span><span class="st"> + </span><span class="sc">{b}</span><span class="st">"</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>For prompt/input <code>'Add: 1, 2'</code> expects output of <code>'&lt;tool&gt;add(1, 2)&lt;/tool&gt;'</code>.</p>
</section>
<section id="training-setup-1" class="level3">
<h3 class="anchored" data-anchor-id="training-setup-1">Training Setup</h3>
<p>Same base model (<strong>SmolLM2-135M</strong>), with slightly adjusted hyperparameters: - Epochs: 3 - Batch size: 16 - Learning rate: 2e-4 - LR scheduler: cosine</p>
<p>For data, I generated addition problems for all digit combinations from 1-7 digits: - Train: ~18,340 examples (also worked with just 2,500) - Validation: ~2,280 examples - Test: ~2,280 examples</p>
<p>Out-of-distribution testing used numbers in the 8-11 digit range. I used Hugging Face‚Äôs <strong>SFTTrainer</strong> for this experiment, which is designed for supervised fine-tuning on instruction-style data.</p>
</section>
<section id="in-range-results-1" class="level3">
<h3 class="anchored" data-anchor-id="in-range-results-1">In-range Results</h3>
<p>The model achieved <strong>100% accuracy</strong> on the in-distribution test set. It learned to extract operands from all prompt formats and emit the correct tool call syntax.</p>
</section>
<section id="out-of-range-results" class="level3">
<h3 class="anchored" data-anchor-id="out-of-range-results">Out-of-range Results</h3>
<p>Testing on 8-11 digit numbers (well beyond the 1-7 digit training range):</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Test Category</th>
<th>Accuracy</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>both_large (8-11 + 8-11)</td>
<td>99.3% (894/900)</td>
</tr>
<tr class="even">
<td>small_large (1-7 + 8-11)</td>
<td>99.6% (2091/2100)</td>
</tr>
<tr class="odd">
<td>large_small (8-11 + 1-7)</td>
<td>99.8% (2096/2100)</td>
</tr>
</tbody>
</table>
<p>Unlike COT, the model generalized <strong>4+ digits beyond its training distribution</strong> with minimal errors.</p>
</section>
<section id="surprising-generalizations" class="level3">
<h3 class="anchored" data-anchor-id="surprising-generalizations">Surprising Generalizations</h3>
<p>The model also handled formats not seen in training:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>-12345678 + 876888881</code></td>
<td><code>add(12345678, 876888881)</code></td>
</tr>
<tr class="even">
<td><code>0.1 + 87654321</code></td>
<td><code>add(0.1, 87654321)</code></td>
</tr>
<tr class="odd">
<td><code>0.1 + 0.24</code></td>
<td><code>add(0.1, 0.24)</code></td>
</tr>
</tbody>
</table>
<p>It learned to extract number-like tokens, including decimals‚Äîthough it drops negative signs.</p>
</section>
<section id="failure-analysis" class="level3">
<h3 class="anchored" data-anchor-id="failure-analysis">Failure Analysis</h3>
<p>The few errors that occurred follow a distinct pattern: <strong>digit duplication</strong>. The model adds an extra repeated digit at the end of numbers:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 34%">
<col style="width: 43%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>Prompt</th>
<th>Expected</th>
<th>Got</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>16842957+1773685222=?</code></td>
<td><code>add(16842957, 1773685222)</code></td>
<td><code>add(16842957, 17736852222)</code></td>
</tr>
<tr class="even">
<td><code>sum of 241527736 and 375562333</code></td>
<td><code>add(241527736, 375562333)</code></td>
<td><code>add(241527736, 3755623333)</code></td>
</tr>
<tr class="odd">
<td><code>77043+72111115=?</code></td>
<td><code>add(77043, 72111115)</code></td>
<td><code>add(77043, 721111115)</code></td>
</tr>
<tr class="even">
<td><code>3921334444 + 8630895 =</code></td>
<td><code>add(3921334444, 8630895)</code></td>
<td><code>add(39213344444, 8630895)</code></td>
</tr>
</tbody>
</table>
<p>Instead, it‚Äôs an <strong>autoregressive stopping problem</strong>: during generation, when the model sees a sequence like <code>...222</code>, it has learned that ‚Äúmore of the same‚Äù is likely ‚Äî and occasionally overshoots, emitting one digit too many.</p>
<div id="635251dc" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>failures <span class="op">=</span> [<span class="st">'1773685222'</span>, <span class="st">'375562333'</span>, <span class="st">'616497833'</span>, <span class="st">'72111115'</span>] </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> num <span class="kw">in</span> failures:</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    tokens <span class="op">=</span> tok.encode(num)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    decoded <span class="op">=</span> [tok.decode([t]) <span class="cf">for</span> t <span class="kw">in</span> tokens]</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>num<span class="sc">}</span><span class="ss"> ‚Üí </span><span class="sc">{</span><span class="bu">len</span>(tokens)<span class="sc">}</span><span class="ss"> tokens: </span><span class="sc">{</span>decoded<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>1773685222 ‚Üí 10 tokens: ['1', '7', '7', '3', '6', '8', '5', '2', '2', '2']
375562333 ‚Üí 9 tokens: ['3', '7', '5', '5', '6', '2', '3', '3', '3']
616497833 ‚Üí 9 tokens: ['6', '1', '6', '4', '9', '7', '8', '3', '3']
72111115 ‚Üí 8 tokens: ['7', '2', '1', '1', '1', '1', '1', '5']</code></pre>
</div>
</div>
<p>Notice that failures cluster around numbers with <strong>repeated trailing digits</strong>. The tokenizer encodes each digit separately (no multi-digit tokens), so this isn‚Äôt a tokenization boundary issue.</p>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Approach</th>
<th>In-range</th>
<th>Out-of-range</th>
<th>Failure Mode</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>COT</td>
<td>~100%</td>
<td>0% generalization</td>
<td>Truncates inputs</td>
</tr>
<tr class="even">
<td>Tool use</td>
<td>100%</td>
<td>99%+</td>
<td>Occasional digit duplication</td>
</tr>
</tbody>
</table>
<p>One can extend the dataset to handle other arithmetic operations‚Äîif addition can be learned this easily, multiplication or division likely can too. The model even showed some ability to extract decimals, though edge cases like negative numbers weren‚Äôt handled correctly. COT requires the model to <em>perform</em> arithmetic‚Äîtracking carries across variable-length sequences. Tool use only requires the model to <em>extract and copy</em> numbers into a fixed format.</p>
<p><strong>Key insight:</strong> by letting the model leverage the CPU for computation rather than teaching complex algorithms. By converting the problem from multi-step reasoning to number extraction, the model generalizes far beyond its training distribution.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/tripathysagar\.github\.io\/sagaTrip");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/tripathysagar/sagaTrip/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>